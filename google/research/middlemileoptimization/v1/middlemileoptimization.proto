// Copyright 2024 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

syntax = "proto3";

package google.research.middlemileoptimization.v1;

import "google/api/annotations.proto";
import "google/api/client.proto";
import "google/api/field_behavior.proto";
import "google/api/resource.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/field_mask.proto";
import "google/research/middlemileoptimization/v1/resources.proto";
import "google/type/datetime.proto";

option go_package = "google.golang.org/genproto/googleapis/research/middlemileoptimization/v1;middlemileoptimization";
option java_multiple_files = true;
option java_outer_classname = "MiddleMileOptimizationProto";
option java_package = "com.google.research.middlemileoptimization.v1";

// Service to manage a logistics network and route shipments inside.
// This protocol is stateless (messages are independent), although the service
// behind it is highly stateful (receiving a message may drastically change
// replies for many methods, like routing a shipment may change the routing of
// other shipments).
service MiddleMileOptimization {
  option (google.api.default_host) = "middlemileoptimization.googleapis.com";

  // Creates a Network.
  rpc CreateNetwork(CreateNetworkRequest) returns (Network) {
    option (google.api.http) = {
      post: "/v1/networks"
      body: "network"
    };
    option (google.api.method_signature) = "network,network_id";
  }

  // Gets the details of a Network.
  rpc GetNetwork(GetNetworkRequest) returns (Network) {
    option (google.api.http) = {
      get: "/v1/{name=networks/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Lists the Network.
  rpc ListNetworks(ListNetworksRequest) returns (ListNetworksResponse) {
    option (google.api.http) = {
      get: "/v1/networks"
    };
    option (google.api.method_signature) = "";
  }

  // Updates a Network.
  rpc UpdateNetwork(UpdateNetworkRequest) returns (Network) {
    option (google.api.http) = {
      patch: "/v1/{network.name=networks/*}"
      body: "network"
    };
    option (google.api.method_signature) = "network,update_mask";
  }

  // Deletes a Network.
  rpc DeleteNetwork(DeleteNetworkRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/v1/{name=networks/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Creates a Line.
  rpc CreateLine(CreateLineRequest) returns (Line) {
    option (google.api.http) = {
      post: "/v1/{parent=networks/*}/line"
      body: "line"
    };
    option (google.api.method_signature) = "parent,line,line_id";
  }

  // Gets the details of a Line.
  rpc GetLine(GetLineRequest) returns (Line) {
    option (google.api.http) = {
      get: "/v1/{name=networks/*/lines/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Lists the Lines.
  rpc ListLines(ListLinesRequest) returns (ListLinesResponse) {
    option (google.api.http) = {
      get: "/v1/{parent=networks/*}/lines"
    };
    option (google.api.method_signature) = "parent";
  }

  // Updates a Line.
  rpc UpdateLine(UpdateLineRequest) returns (Line) {
    option (google.api.http) = {
      patch: "/v1/{line.name=networks/*/lines/*}"
      body: "line"
    };
    option (google.api.method_signature) = "line,update_mask";
  }

  // Deletes a Line.
  rpc DeleteLine(DeleteLineRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/v1/{name=networks/*/lines/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Creates a LineRotation.
  rpc CreateLineRotation(CreateLineRotationRequest) returns (LineRotation) {
    option (google.api.http) = {
      post: "/v1/{parent=networks/*/lines/*}/rotations"
      body: "line_rotation"
    };
    option (google.api.method_signature) =
        "parent,line_rotation,line_rotation_id";
  }

  // Gets the details of a LineRotation.
  rpc GetLineRotation(GetLineRotationRequest) returns (LineRotation) {
    option (google.api.http) = {
      get: "/v1/{name=networks/*/lines/*/rotations/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Lists the LineRotations.
  rpc ListLineRotations(ListLineRotationsRequest)
      returns (ListLineRotationsResponse) {
    option (google.api.http) = {
      get: "/v1/{parent=networks/*/lines/*}/rotations"
    };
    option (google.api.method_signature) = "parent";
  }

  // Updates a LineRotation.
  rpc UpdateLineRotation(UpdateLineRotationRequest) returns (LineRotation) {
    option (google.api.http) = {
      patch: "/v1/{line_rotation.name=networks/*/lines/*/rotations/*}"
      body: "line_rotation"
    };
    option (google.api.method_signature) = "line_rotation,update_mask";
  }

  // Deletes a LineRotation.
  rpc DeleteLineRotation(DeleteLineRotationRequest)
      returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/v1/{name=networks/*/lines/*/rotations/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Creates a Vehicle.
  rpc CreateVehicle(CreateVehicleRequest) returns (Vehicle) {
    option (google.api.http) = {
      post: "/v1/{parent=networks/*}/vehicles"
      body: "vehicle"
    };
    option (google.api.method_signature) = "parent,vehicle,vehicle_id";
  }

  // Gets the details of a Vehicle.
  rpc GetVehicle(GetVehicleRequest) returns (Vehicle) {
    option (google.api.http) = {
      get: "/v1/{name=networks/*/vehicles/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Lists the Vehicles.
  rpc ListVehicles(ListVehiclesRequest) returns (ListVehiclesResponse) {
    option (google.api.http) = {
      get: "/v1/{parent=networks/*}/vehicles"
    };
    option (google.api.method_signature) = "parent";
  }

  // Updates a Vehicle.
  rpc UpdateVehicle(UpdateVehicleRequest) returns (Vehicle) {
    option (google.api.http) = {
      patch: "/v1/{vehicle.name=networks/*/vehicles/*}"
      body: "vehicle"
    };
    option (google.api.method_signature) = "vehicle,update_mask";
  }

  // Deletes a Vehicle.
  rpc DeleteVehicle(DeleteVehicleRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/v1/{name=networks/*/vehicles/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Creates a Hub.
  rpc CreateHub(CreateHubRequest) returns (Hub) {
    option (google.api.http) = {
      post: "/v1/{parent=networks/*}/hubs"
      body: "hub"
    };
    option (google.api.method_signature) = "parent,hub,hub_id";
  }

  // Gets the details of a Hub.
  rpc GetHub(GetHubRequest) returns (Hub) {
    option (google.api.http) = {
      get: "/v1/{name=networks/*/hubs/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Lists the Hubs.
  rpc ListHubs(ListHubsRequest) returns (ListHubsResponse) {
    option (google.api.http) = {
      get: "/v1/{parent=networks/*}/hubs"
    };
    option (google.api.method_signature) = "parent";
  }

  // Updates a Hub.
  rpc UpdateHub(UpdateHubRequest) returns (Hub) {
    option (google.api.http) = {
      patch: "/v1/{hub.name=networks/*/hubs/*}"
      body: "hub"
    };
    option (google.api.method_signature) = "hub,update_mask";
  }

  // Deletes a Hub.
  rpc DeleteHub(DeleteHubRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/v1/{name=networks/*/hubs/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Gets the details of a Shipment.
  rpc GetShipment(GetShipmentRequest) returns (Shipment) {
    option (google.api.http) = {
      get: "/v1/{name=networks/*/shipments/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Lists the Shipments.
  rpc ListShipments(ListShipmentsRequest) returns (ListShipmentsResponse) {
    option (google.api.http) = {
      get: "/v1/{parent=networks/*}/shipments"
    };
    option (google.api.method_signature) = "parent";
  }

  // Deletes a Shipment.
  rpc DeleteShipment(DeleteShipmentRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/v1/{name=networks/*/shipments/*}"
    };
    option (google.api.method_signature) = "name";
  }

  // Route a new shipment. Akin to creation, this operation implies a state
  // change.
  rpc RouteShipment(RouteShipmentRequest) returns (RouteShipmentResponse) {
    option (google.api.http) = {
      post: "/v1/{parent=networks/*}/shipments:route"
      body: "*"
    };
    option (google.api.method_signature) = "parent";
  }

  // Commits the path of a shipment, indicating that it cannot be changed in the
  // future, even by the user, save for force majeure/act of God indicated by
  // the MakeVehicleUnavailable, MakeHubUnavailable, MakeLineUnavailable
  // methods.
  // This method is not used to tag a particular revision of a path.
  rpc CommitPath(CommitPathRequest) returns (Path) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/shipments/*}/path:commit"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Changes the path of a shipment: instead of using the service-computed one,
  // the state will contain the one set by the user through this call.
  rpc UpdatePath(UpdatePathRequest) returns (Path) {
    option (google.api.http) = {
      post: "/v1/{path.shipment=networks/*/shipments/*}/path:update"
      body: "path"
    };
    option (google.api.method_signature) = "path";
  }

  // Makes a vehicle available.
  rpc MakeVehicleAvailable(MakeVehicleAvailableRequest)
      returns (MakeVehicleAvailableResponse) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/vehicles/*}:makeAvailable"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Makes a vehicle unavailable.
  rpc MakeVehicleUnavailable(MakeVehicleUnavailableRequest)
      returns (MakeVehicleUnavailableResponse) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/vehicles/*}:makeUnavailable"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Makes a hub available.
  rpc MakeHubAvailable(MakeHubAvailableRequest)
      returns (MakeHubAvailableResponse) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/hubs/*}:makeAvailable"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Makes a hub unavailable.
  rpc MakeHubUnavailable(MakeHubUnavailableRequest)
      returns (MakeHubUnavailableResponse) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/hubs/*}:makeUnavailable"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Makes a line available.
  rpc MakeLineAvailable(MakeLineAvailableRequest)
      returns (MakeLineAvailableResponse) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/lines/*}:makeAvailable"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Makes a line unavailable.
  rpc MakeLineUnavailable(MakeLineUnavailableRequest)
      returns (MakeLineUnavailableResponse) {
    option (google.api.http) = {
      post: "/v1/{name=networks/*/lines/*}:makeUnavailable"
      body: "*"
    };
    option (google.api.method_signature) = "name";
  }

  // Returns all the paths that are currently available. This method is
  // idempotent and has no side effect.
  rpc ListPaths(ListPathsRequest) returns (ListPathsResponse) {
    option (google.api.http) = {
      get: "/v1/{parent=networks/*}:listPaths"
    };
    option (google.api.method_signature) = "parent";
  }
}

// The request message for `CreateNetwork` method.
message CreateNetworkRequest {
  // Required. Identifier of the network to create.
  string network_id = 1 [(google.api.field_behavior) = REQUIRED];

  // Required. The network to create.
  Network network = 2 [(google.api.field_behavior) = REQUIRED];
}

// The request message for `GetNetwork` method.
message GetNetworkRequest {
  // Required. The name of the network to retrieve.
  // Format: "networks/{network}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Network"
    }
  ];
}

// The request message for `ListNetworks` method.
message ListNetworksRequest {
  // Optional. The maximum number of networks to return. The service may return
  // fewer than this value. If unspecified, at most 50 networks will be
  // returned. The maximum value is 1000; values above 1000 will be coerced to
  // 1000.
  int32 page_size = 1 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListNetworks` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListNetworks`
  // must match the call that provided the page token.
  string page_token = 2 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListNetworks` method.
message ListNetworksResponse {
  // The list of networks.
  repeated Network networks = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}

// The request message for `UpdateNetwork` method.
message UpdateNetworkRequest {
  // Required. The network to update.
  //
  // The network's `name` field is used to identify the network to update.
  // Format:
  // "networks/{network}"
  Network network = 1 [(google.api.field_behavior) = REQUIRED];

  // Optional. The list of fields to update.
  google.protobuf.FieldMask update_mask = 2
      [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `DeleteNetwork` method.
message DeleteNetworkRequest {
  // Required. The name of the network to delete.
  // Format: "networks/{network}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Network"
    }
  ];

  // Optional. If set to true, delete the children resources.
  bool force = 2 [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `CreateLine` method.
message CreateLineRequest {
  // Required. The parent resource where this line will be created.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Line"
    }
  ];

  // Required. Identifier of the line to create.
  string line_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Required. The line to create.
  Line line = 3 [(google.api.field_behavior) = REQUIRED];
}

// The request message for `GetLine` method.
message GetLineRequest {
  // Required. The name of the network to retrieve.
  // Format: "networks/{network}/lines/{line}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Line"
    }
  ];
}

// The request message for `ListLines` method.
message ListLinesRequest {
  // Required. The parent, which owns this collection of lines.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Line"
    }
  ];

  // Optional. The maximum number of lines to return. The service may return
  // fewer than this value. If unspecified, at most 50 lines will be returned.
  // The maximum value is 1000; values above 1000 will be coerced to 1000.
  int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListLines` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListLines` must
  // match the call that provided the page token.
  string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListLines` method.
message ListLinesResponse {
  // The lines from the specified network.
  repeated Line lines = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}

// The request message for `UpdateLine` method.
message UpdateLineRequest {
  // Required. The line to update.
  //
  // The line's `name` field is used to identify the line to update.
  // Format:
  // "networks/{network}/lines/{line}"
  Line line = 1 [(google.api.field_behavior) = REQUIRED];

  // Optional. The list of fields to update.
  google.protobuf.FieldMask update_mask = 2
      [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `DeleteLine` method.
message DeleteLineRequest {
  // Required. The name of the line to delete.
  // Format: "networks/{network}/lines/{line}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Line"
    }
  ];

  // Optional. If set to true, delete the children resources.
  bool force = 2 [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `CreateLineRotation` method.
message CreateLineRotationRequest {
  // Required. The parent resource where this line rotation will be created.
  // Format: "networks/{network}/lines/{line}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/LineRotation"
    }
  ];

  // Required. Identifier of the line rotation to create.
  string line_rotation_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Required. The line rotation to create.
  LineRotation line_rotation = 3 [(google.api.field_behavior) = REQUIRED];
}

// The request message for `GetLineRotation` method.
message GetLineRotationRequest {
  // Required. The name of the line rotation to retrieve.
  // Format: "networks/{network}/lines/{line}/rotations/{rotation}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/LineRotation"
    }
  ];
}

// The request message for `ListLineRotations` method.
message ListLineRotationsRequest {
  // Required. The parent, which owns this collection of line rotations.
  // Format: "networks/{network}/lines/{line}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/LineRotation"
    }
  ];

  // Optional. The maximum number of line rotations to return. The service may
  // return fewer than this value. If unspecified, at most 50 LineRotations will
  // be returned. The maximum value is 1000; values above 1000 will be coerced
  // to 1000.
  int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListLineRotations` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListLineRotations` must
  // match the call that provided the page token.
  string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListLineRotations` method.
message ListLineRotationsResponse {
  // The line rotations from the specified network and line.
  repeated LineRotation line_rotations = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}

// The request message for `UpdateLineRotation` method.
message UpdateLineRotationRequest {
  // Required. The network to update.
  //
  // The rotation's `name` field is used to identify the rotation to update.
  // Format:
  // "networks/{network}/lines/{line}/rotations/{rotation}"
  LineRotation line_rotation = 1 [(google.api.field_behavior) = REQUIRED];

  // Optional. The list of fields to update.
  google.protobuf.FieldMask update_mask = 2
      [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `DeleteLineRotation` method.
message DeleteLineRotationRequest {
  // Required. The name of the line rotation to delete.
  // Format: "networks/{network}/lines/{line}/rotations/{rotation}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/LineRotation"
    }
  ];
}

// The request message for `CreateVehicle` method.
message CreateVehicleRequest {
  // Required. The parent resource where this vehicle will be created.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Vehicle"
    }
  ];

  // Required. Identifier of the vehicle to create.
  string vehicle_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Required. The vehicle to create.
  Vehicle vehicle = 3 [(google.api.field_behavior) = REQUIRED];
}

// The request message for `GetVehicle` method.
message GetVehicleRequest {
  // Required. The name of the vehicle to retrieve.
  // Format: "networks/{network}/vehicles/{vehicle}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Vehicle"
    }
  ];
}

// The request message for `ListVehicles` method.
message ListVehiclesRequest {
  // Required. The parent, which owns this collection of vehicles.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Vehicle"
    }
  ];

  // Optional. The maximum number of vehicles to return. The service may return
  // fewer than this value. If unspecified, at most 50 vehicles will be
  // returned. The maximum value is 1000; values above 1000 will be coerced to
  // 1000.
  int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListVehicles` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListVehicles` must
  // match the call that provided the page token.
  string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListVehicles` method.
message ListVehiclesResponse {
  // The vehicles from the specified network.
  repeated Vehicle vehicles = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}

// The request message for `UpdateVehicle` method.
message UpdateVehicleRequest {
  // Required. The vehicle to update.
  //
  // The vehicle's `name` field is used to identify the vehicle to update.
  // Format:
  // "networks/{network}/vehicles/{vehicle}"
  Vehicle vehicle = 1 [(google.api.field_behavior) = REQUIRED];

  // Optional. The list of fields to update.
  google.protobuf.FieldMask update_mask = 2
      [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `DeleteVehicle` method.
message DeleteVehicleRequest {
  // Required. The name of the vehicle to delete.
  // Format: "networks/{network}/vehicles/{vehicle}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Vehicle"
    }
  ];
}

// The request message for `CreateHub` method.
message CreateHubRequest {
  // Required. The parent resource where this hub will be created.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Hub"
    }
  ];

  // Required. Identifier of the hub to create.
  string hub_id = 2 [(google.api.field_behavior) = REQUIRED];

  // Required. The hub to create.
  Hub hub = 3 [(google.api.field_behavior) = REQUIRED];
}

// The request message for `GetHub` method.
message GetHubRequest {
  // Required. The name of the hub to retrieve.
  // Format: "networks/{network}/hubs/{hub}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Hub"
    }
  ];
}

// The request message for `ListHubs` method.
message ListHubsRequest {
  // Required. The parent, which owns this collection of hubs.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Hub"
    }
  ];

  // Optional. The maximum number of hubs to return. The service may return
  // fewer than this value. If unspecified, at most 50 hubs will be returned.
  // The maximum value is 1000; values above 1000 will be coerced to 1000.
  int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListHubs` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListHubs` must
  // match the call that provided the page token.
  string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListHubs` method.
message ListHubsResponse {
  // The hubs from the specified network.
  repeated Hub hubs = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}

// The request message for `UpdateHub` method.
message UpdateHubRequest {
  // Required. The hub to update.
  //
  // The hub's `name` field is used to identify the hub to update.
  // Format:
  // "networks/{network}/hubs/{hub}"
  Hub hub = 1 [(google.api.field_behavior) = REQUIRED];

  // Optional. The list of fields to update.
  google.protobuf.FieldMask update_mask = 2
      [(google.api.field_behavior) = OPTIONAL];
}

// The request message for `DeleteHub` method.
message DeleteHubRequest {
  // Required. The name of the hub to delete.
  // Format: "networks/{network}/hubs/{hub}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Hub"
    }
  ];
}

// The request message for `GetShipment` method.
message GetShipmentRequest {
  // Required. The name of the shipment to retrieve.
  // Format: "networks/{network}/shipments/{shipment}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Shipment"
    }
  ];
}

// The request message for `ListShipments` method.
message ListShipmentsRequest {
  // Required. The parent, which owns this collection of shipments.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Shipment"
    }
  ];

  // Optional. The maximum number of shipments to return. The service may return
  // fewer than this value. If unspecified, at most 50 shipments will be
  // returned. The maximum value is 1000; values above 1000 will be coerced to
  // 1000.
  int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListShipments` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListShipments` must
  // match the call that provided the page token.
  string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListShipments` method.
message ListShipmentsResponse {
  // The shipments from the specified network.
  repeated Shipment shipments = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}

// The request message for `DeleteShipment` method.
message DeleteShipmentRequest {
  // Required. The name of the shipment to delete.
  // Format: "networks/{network}/shipments/{shipment}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Shipment"
    }
  ];
}

// The request message for `RouteShipment` method.
message RouteShipmentRequest {
  // Required. The parent, the network within which the shipment must be routed.
  // Format: "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      child_type: "middlemileoptimization.googleapis.com/Shipment"
    }
  ];

  // Required. The shipment to route.
  Shipment shipment = 2 [(google.api.field_behavior) = REQUIRED];
}

// The response message for `RouteShipment` method.
message RouteShipmentResponse {
  // The shipment that was just created.
  Shipment shipment = 1;

  // The paths that were changed due to routing the shipment. This field
  // includes at least one entry, the path for the shipment that had to be
  // routed. It may contain more paths for other shipments, reflecting internal
  // state changes.
  repeated Path paths = 2;

  // The line rotations that were created while routing the shipment. It may be
  // empty or contain rotations for other shipments, reflecting internal state
  // changes.
  repeated GeneratedLineAndRotation lines = 3;
}

// The request message for `CommitPath` method.
message CommitPathRequest {
  // Full path being committed, from source to destination.
  message PathToCommit {
    // Required. Segments must be in order, from a source to a destination.
    repeated PathSegment segments = 1 [(google.api.field_behavior) = REQUIRED];
  }

  // Part of path being committed, i.e. some segments between the source and the
  // destination.
  message IncompletePathToCommit {
    // Required. A subset of the segments of a path from a source to a
    // destination.
    repeated PathSegment segments = 1 [(google.api.field_behavior) = REQUIRED];
  }

  // Required. The name of the shipment whose path must be committed.
  // Format:
  // "networks/{network}/shipments/{shipment}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Shipment"
    }
  ];

  // The path or parts of the path that should be committed.
  oneof path_to_commit {
    // The segments of a path from a source to a destination.
    PathToCommit complete_shipment_path = 2;

    // A subset of the segments of a path from a source to a destination.
    IncompletePathToCommit segments = 3;
  }
}

// The request message for `UpdatePath` method.
message UpdatePathRequest {
  // Required. The new path for the shipment.
  Path path = 1 [(google.api.field_behavior) = REQUIRED];
}

// The request message for `MakeVehicleAvailable` method.
message MakeVehicleAvailableRequest {
  // Required. The name of the vehicle to make available.
  // Format:
  // "networks/{network}/vehicle/{vehicle}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Vehicle"
    }
  ];

  // Required. The periods where availability will start. They must be points in
  // time in the future. If this field is absent, availability starts when the
  // message is received.
  repeated google.type.DateTime availability_starts = 3
      [(google.api.field_behavior) = REQUIRED];
}

// The response message for `MakeVehicleAvailable` method.
message MakeVehicleAvailableResponse {
  // The name of the vehicle whose availability was updated.
  // Format:
  // "networks/{network}/vehicles/{vehicle}"
  string name = 1 [(google.api.resource_reference) = {
    type: "middlemileoptimization.googleapis.com/Vehicle"
  }];

  // The paths that were updated.
  repeated Path path = 2;
}

// The request message for `MakeVehicleUnavailable` method.
message MakeVehicleUnavailableRequest {
  // Required. The name of the vehicle to make unavailable.
  // Format:
  // "networks/{network}/vehicles/{vehicle}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Vehicle"
    }
  ];

  // Required. The periods where unavailability will start. They must be points
  // in time in the future. If this field is absent, unavailability starts when
  // the message is received.
  repeated google.type.DateTime unavailability_starts = 3
      [(google.api.field_behavior) = REQUIRED];
}

// The response message for `MakeVehicleUnavailable` method.
message MakeVehicleUnavailableResponse {
  // The name of the vehicle whose unavailability was updated.
  // Format:
  // "networks/{network}/vehicles/{vehicle}"
  string name = 1 [(google.api.resource_reference) = {
    type: "middlemileoptimization.googleapis.com/Vehicle"
  }];

  // The paths that were updated.
  repeated Path path = 2;
}

// The request message for `MakeHubAvailable` method.
message MakeHubAvailableRequest {
  // Required. The name of the hub to make available.
  // Format:
  // "networks/{network}/hubs/{hub}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Hub"
    }
  ];

  // Required. The periods where availability will start. They must be points in
  // time in the future. If this field is absent, availability starts when the
  // message is received.
  repeated google.type.DateTime availability_starts = 3
      [(google.api.field_behavior) = REQUIRED];
}

// The response message for `MakeHubAvailable` method.
message MakeHubAvailableResponse {
  // The name of the hub whose unavailability was updated.
  // Format:
  // "networks/{network}/hubs/{hub}"
  string name = 1 [(google.api.resource_reference) = {
    type: "middlemileoptimization.googleapis.com/Hub"
  }];

  // The paths that were updated.
  repeated Path path = 2;
}

// The request message for `MakeHubUnavailable` method.
message MakeHubUnavailableRequest {
  // Required. The name of the hub to make unavailable.
  // Format:
  // "networks/{network}/hubs/{hub}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Hub"
    }
  ];

  // Required. The periods where unavailability will start. They must be points
  // in time in the future. If this field is absent, unavailability starts when
  // the message is received.
  repeated google.type.DateTime unavailability_starts = 3
      [(google.api.field_behavior) = REQUIRED];
}

// The response message for `MakeHubUnavailable` method.
message MakeHubUnavailableResponse {
  // The name of the hub whose unavailability was updated.
  // Format:
  // "networks/{network}/hubs/{hub}"
  string name = 1 [(google.api.resource_reference) = {
    type: "middlemileoptimization.googleapis.com/Hub"
  }];

  // The paths that were updated.
  repeated Path path = 2;
}

// The request message for `MakeHubAvailable` method.
message MakeLineAvailableRequest {
  // Required. The name of the line to make available.
  // Format:
  // "networks/{network}/lines/{line}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Line"
    }
  ];

  // Required. The periods where availability will start. They must be points in
  // time in the future. If this field is absent, availability starts when the
  // message is received.
  repeated google.type.DateTime availability_starts = 3
      [(google.api.field_behavior) = REQUIRED];
}

// The response message for `MakeLineAvailable` method.
message MakeLineAvailableResponse {
  // The name of the line whose unavailability was updated.
  // Format:
  // "networks/{network}/lines/{line}"
  string name = 1 [(google.api.resource_reference) = {
    type: "middlemileoptimization.googleapis.com/Line"
  }];

  // The paths that were updated.
  repeated Path path = 2;
}

// The request message for `MakeLineUnavailable` method.
message MakeLineUnavailableRequest {
  // Required. The name of the line to make unavailable.
  // Format:
  // "networks/{network}/lines/{line}"
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Line"
    }
  ];

  // Required. The periods where unavailability will start. They must be points
  // in time in the future. If this field is absent, unavailability starts when
  // the message is received.
  repeated google.type.DateTime unavailability_starts = 3
      [(google.api.field_behavior) = REQUIRED];
}

// The response message for `MakeLineUnavailable` method.
message MakeLineUnavailableResponse {
  // The name of the line whose unavailability was updated.
  // Format:
  // "networks/{network}/lines/{line}"
  string name = 1 [(google.api.resource_reference) = {
    type: "middlemileoptimization.googleapis.com/Line"
  }];

  // The paths that were updated.
  repeated Path path = 2;
}

// The request message for `ListPaths` method.
message ListPathsRequest {
  // Required. The name of the network for which paths must be sent.
  // Format:
  // "networks/{network}"
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference) = {
      type: "middlemileoptimization.googleapis.com/Network"
    }
  ];

  // Optional. The maximum number of networks to return. The service may return
  // fewer than this value. If unspecified, at most 50 networks will be
  // returned. The maximum value is 1000; values above 1000 will be coerced to
  // 1000.
  int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];

  // Optional. A page token, received from a previous `ListNetworks` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListNetworks`
  // must match the call that provided the page token.
  string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
}

// The response message for `ListPaths` method.
message ListPathsResponse {
  // The list of paths.
  repeated Path paths = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  string next_page_token = 2;
}
